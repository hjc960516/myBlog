## tailwindcss

`tailwindcss`是一个高度可定制的`css`框架,提供一些列的现成样式类, 直接使用特定类名即可实现样式。<br />
[tailwindcss 官网](https://tailwindcss.com/docs/installation/using-vite)

### 优点

- 高度可定制
- 性能优化
- 响应式设计
- 易于使用
- 状态变量
- ...

### 安装

1. 使用`nuxt`主动添加到`modules`

```sh
npx nuxi@latest module add tailwindcss
```

2. 手动安装并添加

- 安装

```sh
npm install --save-dev @nuxtjs/tailwindcss
```

- 在`nuxt.config.ts`添加到`modules`

```ts
export default defineNuxtConfig({
  modules: ["@nuxtjs/tailwindcss"],
});
```

### 安装提示插件和配置

在插件市场中搜索`tailwindcss`并安装插件，在`nuxt`中无法直接使用，需要在`tailwind.config.ts`中添加配置

```ts
// 添加tailwindcss提示配置
tailwindcss: {
  exposeConfig: true;
}
```

### 使用

```vue
<template>
  <div>
    <div class="text-3xl font-bold text-blue-400">tailwind展示</div>
  </div>
</template>
```

## zod

`zod`是一个`typescript`的`schema`验证库，用于验证`typescript`的类型。<br />
[zod 官网](https://zod.nodejs.cn/)

### 安装

```sh
npm install zod
```

### 使用

1. 前端使用

```vue
<template>
  <div>
    <div>tailwindcss和zod的验证、推导ts</div>
    <div class="text-3xl font-bold text-blue-400">tailwind展示</div>
    <van-button type="primary" class="text-red-500!">按钮</van-button>
    <div>
      <p>zod的验证</p>
      <van-field v-model="username" label="文本" placeholder="请输入用户名" />
      <van-button type="primary" @click="check">验证</van-button>
    </div>
  </div>
</template>

<script setup lang="ts">
import { z } from "zod";
const username = ref();

// 定义类型
const userType = z.object({
  // 对象
  name: z.string(), // 字符串
  age: z.number(), // 数字
  email: z.string().email({ message: "自定义错误信息" }), // 验证邮箱
  isAdmin: z.boolean(), // 布尔值
  hobbies: z.array(z.string()), // 字符串数组
  password: z.string().min(8, { message: "自定义错误信息" }), // 限制最低长度
});

// 类型推导
// z.infer<typeof userType> 表示获取 userType 的类型
const user: z.infer<typeof userType> = {
  name: "John Doe",
  age: 30,
  email: "13122sa@qq.com",
  isAdmin: true,
  hobbies: ["reading", "coding"],
  password: "12345678",
};

const check = () => {
  const usernameType = z.string().min(5, { message: "自定义错误信息" });
  const result = usernameType.safeParse(username.value);
  if (result.success) {
    console.log("验证成功");
  } else {
    // 错误信息
    console.log(result.error.issues);
    // 格式化错误信息
    const errorMessage = result.error?.format()?._errors;
    console.log(errorMessage);
  }
};
</script>

<style scoped></style>
```

2. 后端验证
   使用`readValidatedBody(event,(body)=>{})`进行获取数据和验证

```ts
// 定义类型
const userType = z.object({
  // 对象
  name: z.string(), // 字符串
  age: z.number(), // 数字
  email: z.string().email({ message: "自定义错误信息" }), // 验证邮箱
  isAdmin: z.boolean(), // 布尔值
  hobbies: z.array(z.string()), // 字符串数组
  password: z.string().min(8, { message: "自定义错误信息" }), // 限制最低长度
});
// 获取类型定义，
type UserType = z.infer<typeof userType>;
const res = await readValidatedBody(event, (body) => {
  return userType.safeParse(body);
});
if (!res.success) {
  throw createError({
    statusCode: 400,
    statusMessage: "验证失败",
    data: res.error?.format()?._errors,
  });
}
```
