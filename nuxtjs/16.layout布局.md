## layout 布局

`layout` 文件夹中存放的是布局文件，布局文件可以理解为是一个页面的骨架，在这个骨架中可以放置多个页面组件。

## layout 文件

在`根目录`创建`layouts`目录, 必须要有一个`default.vue`文件作为默认布局文件。

## 全局 layout

适用全局，使用`NuxtLayout`组件, 会自动使用`default.vue`作为默认布局文件

### 定义

在`根目录`创建`layouts`目录, 必须要有一个`default.vue`文件作为默认布局文件。

```vue
<template>
  <div>
    <div>layout的基本布局</div>
    <slot></slot>
  </div>
</template>

<script setup lang="ts"></script>

<style scoped></style>
```

### 使用

在`app.vue`中使用`NuxtLayout`组件, 会自动使用`default.vue`作为默认布局文件

```vue
<script lang="ts" setup>
// 设置seo优化
useSeoMeta({
  title: "bilibili", // 标题
  description: "这是b站", // 描述
  keywords: "bilibili, 哔哩哔哩", // 关键词
});

import { useCounterStore } from "@/stores/testPinia";

// 使用 pinia 状态管理
const piniaStore = useCounterStore();

// 使用useState的user的状态管理
const { store } = userStore();
// callOnce: 只执行一次，在构架后端时执行
callOnce("init", () => {
  // console.log(store);
});

// 获取app.config.ts中的配置
const config = useAppConfig();
console.log(config.title);

// 获取环境变量
const env = useRuntimeConfig();
console.log(env.public);
</script>
<template>
  <div>
    <!-- 加载指示器, 也就是跳转路由时的加载动画 -->
    <NuxtLoadingIndicator />

    <!-- 路由切换动画 -->
    <NuxtRouteAnnouncer />

    <!-- loyouts布局 -->
    <NuxtLayout>
      <!-- 有slot作为插入，可以将需要添加的东西放在这, 常用的是直接将路由组件放进来，也就是<NuxtPage /> -->
    </NuxtLayout>
  </div>
</template>
```

## 单独 layout

某些目标页面可以使用单独的`layout`布局, 只需要在`layouts/xxx.vue`创建，然后在`目标页面`使用`definePageMeta`设置`layout`布局即可。

### 创建`custom.vue`单独布局文件

```vue
<template>
  <div>
    <div>我是单独的layout布局</div>
    <slot></slot>
  </div>
</template>

<script setup lang="ts"></script>

<style scoped></style>
```

### 使用

在`目标页面`使用`definePageMeta`设置`layout`布局即可。

```vue
<template>
  <div>
    <div class="text-red-600">我是使用单独layout布局的页面</div>
  </div>
</template>

<script setup lang="ts">
definePageMeta({
  // 设置layout
  layout: "custom",
});
</script>

<style scoped></style>
```

### 测试

在`app.vue`跳转路由，进行观测使用和不使用`单独布局的页面`的区别。

```vue
<script lang="ts" setup>
// 设置seo优化
useSeoMeta({
  title: "bilibili", // 标题
  description: "这是b站", // 描述
  keywords: "bilibili, 哔哩哔哩", // 关键词
});

import { useCounterStore } from "@/stores/testPinia";

// 使用 pinia 状态管理
const piniaStore = useCounterStore();

// 使用useState的user的状态管理
const { store } = userStore();
// callOnce: 只执行一次，在构架后端时执行
callOnce("init", () => {
  // console.log(store);
});

// 获取app.config.ts中的配置
const config = useAppConfig();
console.log(config.title);

// 获取环境变量
const env = useRuntimeConfig();
console.log(env.public);
</script>
<template>
  <div>
    <!-- 自定义测试components自动导入组件 -->
    <testComponents message="我是传过来的信息啊" />

    <!-- 加载指示器, 也就是跳转路由时的加载动画 -->
    <NuxtLoadingIndicator />

    <!-- 路由切换动画 -->
    <NuxtRouteAnnouncer />
    <NuxtLink to="/users">users页</NuxtLink><br />
    <NuxtLink to="/customLayout">单独layout</NuxtLink><br />

    <div class="py-3 text-blue-700">----------------------------------</div>
    <!-- loyouts布局 -->

    <NuxtLayout>
      <!-- 有slot作为插入，可以将需要添加的东西放在这, 常用的是直接将路由组件放进来，也就是<NuxtPage /> -->
      <NuxtPage />
    </NuxtLayout>
  </div>
</template>
```
