## Controller Request （获取前端传过来的参数）

|         装饰器          |         传过来的参数          |
| :---------------------: | :---------------------------: |
|       @Request()        |              req              |
|       @Response()       |              res              |
|         @Next()         |             next              |
|       @Session()        |          req.session          |
|  @Param(key?: string)   |  req.params/req.params[key]   |
|   @Body(key?: string)   |    req.body/req.body[key]     |
|  @Query(key?: string)   |   req.query/req.query[key]    |
| @Headers(name?: string) | req.headers/req.headers[name] |
|        @HttpCode        |       返回给前端的 code       |

## 调试工具

1. [postMan 下载](https://www.postman.com/downloads/)
2. [Apifox 下载](https://apifox.com/?utm_source=baidu_sem1)

## 创建项目

```sh
# 创建项目
nest new [项目名称]

# 进入到项目目录中，启动项目
# 热启动
npm run start:dev
```

### app.controller.ts

测试上面所说的装饰器

```ts
import {
  Controller,
  Get,
  Post,
  Query,
  Request,
  Body,
  Response,
  Param,
  HttpCode,
  Headers,
} from "@nestjs/common";
import { AppService } from "./app.service";

@Controller()
export class AppController {
  constructor(private readonly appService: AppService) {}

  @Get()
  getHello(): string {
    return this.appService.getHello();
  }

  // 请求地址: http://localhost:3000/testGet , header添加随意一个识别，query添加参数
  @Get("/testGet")
  // 返回特定的code
  @HttpCode(200)
  // 解析request：@Request() req 表示将request解析出来为req参数
  // 解析headers：@Headers() headers 表示将request中的headers解析出来为headers参数
  // 解析query：@Query() query 表示将request中的query解析出来为query参数
  getTest(@Request() req, @Headers() headers, @Query() query): any {
    console.log(req, headers);
    console.log(query);

    return {
      code: 200,
      msg: "使用控制器解析 @Request() req, @Headers() headers, @Query() query",
    };
  }

  // 动态路由和解析param, 请求地址: http://localhost:3000/testGetParams/xxxx
  @Get("/testGetParams/:id")
  @HttpCode(200)
  getParams(@Param() param): any {
    console.log(param);
    return {
      code: 200,
      msg: "动态路由，使用控制器解析@Param() param",
    };
  }

  // 解析body, 请求地址: http://localhost:3000/postTest body添加随意参数值
  // 也可以直接读body中的某个key的值
  @Post("/postTest")
  @HttpCode(200)
  getPost(@Body() body, @Body("name") name): any {
    console.log(body, name);

    return {
      code: 200,
      msg: "使用控制器解析@Body() body",
    };
  }
}
```
