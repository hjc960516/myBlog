## 前置知识

### 装饰器

装饰器是一种特殊的类型声明,实际上是一个函数，他可以附加在类，方法，属性，参数上面,
`@xxxx`是一个语法糖

1. 初始化 ts

```sh
tsc --init
```

2. 开启装饰器

在`tsconfig.json`中，将`experimentalDecorators`设置为`true`

#### 类装饰器(ClassDecorator)

```ts
/**
 * 类装饰器(ClassDecorator)
 * 通过 function 创建装饰器,然后通过prototype可以自定义添加属性和方法, 装饰器其实就是一个函数
 * @param target 装饰器下的类
 */
// function ClassDecotators<ClassDecorator>(target: any) {
//     target.prototype.__name = 'test类装饰器'
//     target.prototype.changeName = (value: any) => {
//         target.prototype.__name = value
//     }
//     console.log(target);
// }

const ClassDecotators: ClassDecorator = (target: any) => {
  target.prototype.__name = "test装饰器";
  target.prototype.changeName = (value: any) => {
    target.prototype.__name = value;
  };
  console.log(target);
};

// 声明类装饰器,通过 @ 符号来声明
// @ClassDecotators 其实是一个语法糖，实际上就是把类传进函数中，也就是ClassDecotators(Test)
@ClassDecotators
class TestClass {
  constructor() {}
}

// 实例化test类
const testclass: any = new TestClass();
console.log(testclass.__name);
```

#### 属性装饰器(PropertyDecorator)

```ts
/**
 * 属性装饰器(PropertyDecorator)
 * @param target 装饰器下的类原形对象
 * @param key 类中属性名
 */
const PropertyDecorators: PropertyDecorator = (
  target: any,
  key: string | symbol
) => {
  console.log(target, key);
};

class TestProper {
  @PropertyDecorators
  public name: any;
  constructor(name: any) {
    this.name = name;
  }
}

const testProper = new TestProper("我是属性装饰器");
console.log(testProper.name);
```

#### 方法装饰器(MethodDecorator)

```ts
/**
 * 方法装饰器(MethodDecorator)
 * @param target 装饰器下的类原形对象
 * @param key 类中方法名
 * @param descriptor 方法描述 
 * {
  value: [Function: getName], // 值
  writable: true,  // 可写
  enumerable: false, // 可枚举
  configurable: true // 可配置
}
 */
const MethodDecorators: MethodDecorator = (
  target: any,
  key: string | symbol,
  descriptor: any
) => {
  console.log(target, key, descriptor);
};

class TestMethod {
  public name: any;
  constructor(name: any) {
    this.name = name;
  }
  @MethodDecorators
  getName() {
    return this.name;
  }
}

const testMethod = new TestProper("我是方法装饰器");
console.log(testMethod.name);
```

#### 参数装饰器(ParameterDecorator)

```ts
/**
 * 参数装饰器(ParameterDecorator)
 * @param target 装饰器下的类原形对象
 * @param key 方法的名称
 * @param index 参数排位
 */

const ParameterDecorators: ParameterDecorator = (
  target: any,
  key: string | symbol | undefined,
  index: number
) => {
  console.log(target, key, index);
};

class TestParameter {
  public name: any;
  constructor(name: any) {
    this.name = name;
  }
  getName(name: string, @ParameterDecorators age: number) {
    return this.name;
  }
}

const testParameter = new TestProper("我是参数装饰器");
console.log(testParameter.name);
```
